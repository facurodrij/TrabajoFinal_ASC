{% extends "extends/admin/base.html" %}
{% load static %}

{% block breadcrumbs %}
    <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="{% url 'index' %}">Inicio</a></li>
        <li class="breadcrumb-item active">{{ title }}</li>
    </ol>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div id="calendar"></div>
    </div>
{% endblock content %}

{% block body_js %}
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.0.2/index.global.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                themeSystem: 'bootstrap',
                initialView: 'timeGridDay',
                locale: 'es',
                // headerToolbar left center right and today
                customButtons: {
                    addButton: {
                        text: 'Crear reserva',
                        click: function () {
                            window.location.href = "{% url 'admin-reservas-crear' %}";
                        }
                    }
                },
                headerToolbar: {
                    left: 'prev,next today addButton',
                    center: 'title',
                    right: 'timeGridDay,timeGridWeek,dayGridMonth,listWeek'
                },
                // language buttons es
                buttonText: {
                    today: 'Hoy',
                    month: 'Mes',
                    week: 'Semana',
                    day: 'DÃ­a',
                    list: 'Lista'
                },
                // no mostrar all-day
                allDaySlot: false,
                // no mostrar el titulo de la hora
                slotLabelFormat: {
                    hour: '2-digit',
                    minute: '2-digit',
                    omitZeroMinute: false,
                    meridiem: 'short'
                },
                // events
                events: [
                    {% for reserva in reservas %}
                        {
                            title: '{{ reserva.cancha }} - {{ reserva.nombre }}',
                            start: '{{ reserva.start }}',
                            end: '{{ reserva.end }}',
                            url: '{% url 'admin-reservas-editar' reserva.id %}',
                            allDay: false,
                            color: '{{ reserva.color }}',
                            {% if reserva.asistido %}
                                borderColor: '#5cb85c',
                            {% endif %}
                        },
                    {% endfor %}
                ]
            });
            calendar.render();
        });
    </script>
{% endblock body_js %}